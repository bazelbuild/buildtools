load("@io_bazel_rules_go//go:def.bzl", "go_library")
load("//build:build_defs.bzl", "genfile_check_test")
load(":defs.bzl", "generate_tables")

# gazelle:exclude tables.gen.go

genfile_check_test(
    src = "tables.gen.go",
    gen = "tables.go",
)

# generated by: bazel info build-language > build-language.pb
# Unable to get this info from within a single bazel.
generate_tables(
    name = "generateTablesFile",
    src = "build-language.pb",
    out = "tables.go",
)

go_library(
    name = "lang",
    srcs = [
        "tables.go",  # keep
    ],
    importpath = "github.com/bazelbuild/buildtools/lang",
    visibility = ["//visibility:public"],
    deps = [
        "//build_proto",  # keep
    ],
)

alias(
    name = "go_default_library",
    actual = ":lang",
    visibility = ["//visibility:public"],
)
